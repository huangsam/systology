<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Monitoring & Observability - Systology</title><meta name=description content="Metrics, logging, tracing, alerting for observable systems."><link rel=canonical href=https://sambyte.net/systology/principles/monitoring/><link rel=icon href=/favicon.svg type=image/svg+xml><meta name=robots content="index, follow"><script>try{localStorage.getItem("theme")==="dark"&&document.documentElement.setAttribute("data-theme","dark")}catch{}</script><link rel=stylesheet href="/css/styles.css?v=1772222251"><link rel=stylesheet href="/css/syntax.css?v=1772222251"><link rel=stylesheet href="/css/search.css?v=1772222251"></head><body><header class=site-header role=banner><div class="container header-inner"><a class=brand href=/ aria-label=Systology><img src=/favicon.svg alt class=logo-icon> Systology</a><nav class=site-nav role=navigation aria-label="Main navigation"><button class=search-toggle data-open-search aria-label=Search>
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
</button>
<button class=theme-toggle id=theme-toggle aria-label="Toggle dark mode">
<svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></nav></div></header><main id=content class="container prose"><article><header><div class=title-group><h1>Monitoring & Observability</h1></div><h2>Metrics, logging, tracing, alerting for observable systems.</h2><div class=tags><span>Tags:</span>
<a class=badge href=/tags/monitoring/>monitoring</a></div></header><section><h2 id=metrics--kpis>Metrics & KPIs</h2><p>Emit structured metrics for throughput, latency, and error rates alongside business KPIs using consistent naming conventions. This provides both technical and product perspectives on system health.</p><p>Follow the RED method for services (Rate, Errors, Duration) and the USE method for resources (Utilization, Saturation, Errors). Use a consistent naming convention like <code>{service}_{component}_{metric}_{unit}</code> (e.g., <code>api_orders_request_duration_seconds</code>). Emit both counters and histograms‚Äîcounters tell you <em>how many</em>, histograms tell you <em>how long</em>. Expose business KPIs (revenue per minute, signups per hour) alongside technical metrics so on-call engineers can correlate system behavior with business impact.</p><p>See how <a href=https://sambyte.net/systology/deep-dives/chowist/>Chowist</a> exposes structured metrics and logging for a twelve-factor web app.</p><p><strong>Anti-pattern ‚Äî Metric Overload:</strong> Emitting thousands of high-cardinality metrics (one per user ID, one per URL path) without aggregation. This explodes storage costs, slows dashboards, and makes it impossible to find signal in the noise. Aggregate at the source: use bounded label sets (HTTP method, status code bucket, service name) and push high-cardinality data to logs or traces instead.</p><h2 id=structured-logging>Structured Logging</h2><p>Use JSON logs with consistent fields (timestamp, level, correlation ID, context) and treat logs as event streams for centralized analysis. Unstructured logging is noise; structured logging enables aggregation and debugging at scale.</p><p>Every log line should include: <code>timestamp</code>, <code>level</code>, <code>service</code>, <code>correlation_id</code> (trace ID), and <code>message</code>. Add contextual fields as needed: <code>user_id</code>, <code>request_path</code>, <code>duration_ms</code>. Output as JSON so log aggregation tools (ELK, Loki, CloudWatch) can index and query fields directly. Use log levels consistently: DEBUG for development, INFO for normal operations, WARN for recoverable issues, ERROR for failures requiring attention.</p><p><strong>Anti-pattern ‚Äî Printf Debugging in Production:</strong> Sprinkling <code>print(f"got here: {data}")</code> throughout code and leaving it in production. These unstructured, contextless messages are impossible to filter, impossible to aggregate, and degrade logging signal-to-noise ratio. Use a structured logger from day one; the effort is minimal and the payoff is enormous.</p><p><strong>Anti-pattern ‚Äî Logging Everything at DEBUG:</strong> Setting production log level to DEBUG &ldquo;just in case.&rdquo; This generates orders of magnitude more data, increases costs, and can actually cause performance issues (log serialization in hot paths). Use INFO in production and enable DEBUG selectively per-service when investigating specific issues.</p><h2 id=distributed-tracing>Distributed Tracing</h2><p>Add trace IDs and span IDs across service boundaries to track requests end-to-end and identify latency bottlenecks in distributed systems. This is essential infrastructure for diagnosing multi-service interactions.</p><p>Instrument your services with OpenTelemetry (the industry standard), propagating trace context via HTTP headers (<code>traceparent</code>) or gRPC metadata. Each service creates spans for its work and passes the trace ID downstream. The trace collector (Jaeger, Tempo, Zipkin) assembles the full request tree, showing exactly where time was spent, which service caused the delay, and which calls failed.</p><p>See how the <a href=https://sambyte.net/systology/designs/notification-system/>Notification System</a> design tracks notifications through priority queues, dispatchers, and channel adapters‚Äîtracing reveals which stage introduces latency.</p><p><strong>Anti-pattern ‚Äî Tracing Only at the Edge:</strong> Adding trace instrumentation only to the API gateway and assuming you&rsquo;ll figure out downstream latency from logs. Without spans from intermediate services, your trace shows a single long span with no visibility into whether the database, cache, or third-party API caused the delay.</p><h2 id=alerting--slos>Alerting & SLOs</h2><p>Define Service Level Objectives and error budgets for critical systems, then set up alerts on threshold violations with carefully tuned thresholds to avoid alert fatigue. An alert that fires constantly trains people to ignore alerts.</p><p>Start by defining SLIs (Service Level Indicators): request latency P99, error rate, availability. Then set SLOs: &ldquo;99.9% of requests complete in &lt; 500ms&rdquo; and &ldquo;error rate &lt; 0.1% over a 7-day window.&rdquo; Calculate the error budget (0.1% of 7 days ‚âà 10 minutes of downtime). Alert when the burn rate threatens to exhaust the error budget within the SLO period‚Äînot on instantaneous spikes.</p><p>See the operational excellence sections in the <a href=https://sambyte.net/systology/designs/flash-sale/>Flash Sale</a> and <a href=https://sambyte.net/systology/designs/ad-click-aggregator/>Ad Click Aggregator</a> designs for concrete SLO/SLI examples in production systems.</p><p><strong>Anti-pattern ‚Äî Threshold on Instantaneous Values:</strong> Alerting on <code>latency_p99 > 500ms</code> with a 1-minute window. A single slow garbage collection pause triggers a page at 3 AM. Instead, alert on burn rate: &ldquo;at the current error rate, we&rsquo;ll exceed our monthly error budget within 6 hours.&rdquo; This distinguishes brief transients from sustained degradation.</p><h2 id=health-checks--readiness>Health Checks & Readiness</h2><p>Implement health endpoints that check dependencies and differentiate between liveness (is it running?) and readiness (can it handle traffic?). This distinction is crucial for orchestrators and load balancers.</p><p>The liveness probe (<code>/healthz</code>) answers &ldquo;is this process alive?"‚Äîit should be cheap and dependency-free (return 200 if the event loop is running). The readiness probe (<code>/readyz</code>) answers &ldquo;can this instance handle traffic?"‚Äîit should check database connectivity, cache availability, and downstream service health. Kubernetes uses these to decide whether to restart a pod (liveness) or remove it from the service load balancer (readiness).</p><p><strong>Anti-pattern ‚Äî Liveness Check That Queries the Database:</strong> Making the liveness probe depend on external services. If the database goes down, Kubernetes sees liveness failures and restarts all your pods‚Äînow you have a cascading outage: database overload from reconnections, plus service downtime from restarts. Liveness should be trivial; readiness handles dependency health.</p><h2 id=resource-profiling>Resource Profiling</h2><p>Profile CPU, memory, and IO to identify hotspots and validate optimization impact. Production profiling catches regressions that benchmarks miss, especially in stateful systems where state size growth can silently degrade performance.</p><p>Enable continuous profiling in production (Pyroscope, Google Cloud Profiler, <code>async-profiler</code> for JVM) with low overhead (~2% CPU). This captures flame graphs over time, letting you compare before/after deployments and identify regressions. For memory profiling, track heap size, GC frequency, and allocation rates‚Äîa steady climb in heap size indicates a leak even if the system hasn&rsquo;t OOMed yet.</p><p>See the <a href=https://sambyte.net/systology/principles/algorithms-performance/>Algorithms & Performance</a> principles for guidance on micro-benchmarking and profiling-driven optimization.</p><p><strong>Anti-pattern ‚Äî Profile Only in Development:</strong> Running profilers only on dev machines with toy data. Production workloads have different data distributions, concurrency levels, and memory pressure. A function that&rsquo;s fast on 100 items might be catastrophically slow on 10 million. Continuous production profiling catches these scale-dependent regressions.</p><h2 id=observability-in-data-pipelines>Observability in Data Pipelines</h2><p>Track consumer lag, watermark progression, and checkpoint health for streaming jobs. Pipeline observability reveals whether you&rsquo;re truly delivering the low-latency guarantees you promise.</p><p>For Kafka-based pipelines, monitor <code>consumer_group_lag</code> (records behind the latest offset), <code>checkpoint_duration_ms</code>, and <code>records_per_second</code>. For Flink, track watermark delay (how far behind event-time the watermark is) and backpressure indicators per operator. Alert when consumer lag exceeds your freshness SLO‚Äîif you promise 1-minute freshness and lag is 5 minutes, you&rsquo;re violating your contract.</p><p>See <a href=https://sambyte.net/systology/deep-dives/flink-trial/>Flink Trial</a> and <a href=https://sambyte.net/systology/deep-dives/spark-trial/>Spark Trial</a> for examples of monitoring data pipeline throughput and checkpointing. For a related treatment of backpressure, partitioning, and fault tolerance that directly affect observability, see the <a href=https://sambyte.net/systology/principles/data-pipelines/>Data Pipelines</a> principles.</p><h2 id=dashboard--visualization>Dashboard & Visualization</h2><p>Build operational dashboards showing key metrics and drill-down views for debugging specific jobs. Time-series visualization reveals trends and patterns that raw numbers obscure.</p><p>Structure dashboards in layers: (1) a top-level &ldquo;golden signals&rdquo; dashboard (latency, traffic, errors, saturation) for at-a-glance health, (2) per-service dashboards with detailed metrics, and (3) drill-down views for specific subsystems (database queries, cache hit rates, queue depths). Use Grafana, Datadog, or equivalent. Include annotation markers for deployments and incidents so you can visually correlate changes with metric shifts.</p><p><strong>Anti-pattern ‚Äî Dashboard Without Context:</strong> A wall of graphs with no annotations, no baselines, and no explanation of what &ldquo;normal&rdquo; looks like. A dashboard that requires tribal knowledge to interpret is useless to an on-call engineer at 3 AM who&rsquo;s never seen it before. Add thresholds, annotations, and documentation links to every panel.</p><h2 id=error-budget--postmortems>Error Budget & Postmortems</h2><p>Track error budgets to balance velocity and reliability, and conduct blameless postmortems to identify systemic issues rather than individual mistakes. This creates a feedback loop that systematically improves reliability.</p><p>Run the error budget as a decision-making tool: when budget is healthy, prioritize feature velocity; when budget is thin, prioritize reliability work. After every significant incident, write a postmortem with: (1) timeline of events, (2) root cause analysis (5 Whys), (3) contributing factors, (4) action items with owners and deadlines. Publish postmortems internally‚Äîlearning from incidents is more valuable than the fix itself.</p><p><strong>Anti-pattern ‚Äî Blame-based Incident Response:</strong> Finding the person who &ldquo;caused&rdquo; the outage and assigning blame. This drives engineers to hide mistakes and avoid taking on risky but important work. Blameless postmortems focus on <em>systems</em>: &ldquo;Why did the system allow a single config change to take down production?&rdquo; is more useful than &ldquo;Who pushed the bad config?&rdquo;</p><h2 id=cost-monitoring>Cost Monitoring</h2><p>Track infrastructure costs by service and environment, setting budget alerts and forecasting based on usage trends. Cloud costs are easy to ignore until you get a surprise bill.</p><p>Tag all cloud resources by service, team, and environment (dev/staging/production). Use cloud cost explorers (AWS Cost Explorer, GCP Billing) and set budget alerts at 80% and 100% of expected monthly spend. For variable workloads, forecast based on trailing usage trends and set alerts on anomalous spikes. Review costs monthly in team meetings to build awareness.</p><p><strong>Anti-pattern ‚Äî &ldquo;The Cloud is Someone Else&rsquo;s Problem&rdquo;:</strong> Ignoring cloud costs because &ldquo;infrastructure manages the budget.&rdquo; Engineers who deploy services should see the cost impact of their decisions. A poorly tuned Spark job that runs 10x longer than necessary is an engineering problem, not just a finance problem. Make cost a first-class metric alongside latency and availability.</p><h2 id=development--testing-observability>Development & Testing Observability</h2><p>Include verbose logging modes, observability-friendly test fixtures, and use metrics to validate system behavior during integration tests. This surfaces bugs in the lab rather than production.</p><p>In integration tests, assert on metrics: &ldquo;after processing 1000 messages, the <code>processed_total</code> counter should equal 1000 and the <code>error_total</code> counter should equal 0.&rdquo; Use test-scoped Prometheus registries or metric interceptors to capture and assert on emitted metrics. This catches instrumentation bugs (wrong labels, missing metrics) before they reach production.</p><p><strong>Anti-pattern ‚Äî Observability as Afterthought:</strong> Adding metrics and tracing after the system is built and deployed. Retrofitting observability means you have no visibility during the most critical phase‚Äîinitial deployment and first production traffic. Instrument from day one; it&rsquo;s 10x easier to build in than to bolt on.</p><h2 id=privacy--compliance>Privacy & Compliance</h2><p>Never log PII or credentials, implement retention policies for logs and traces, and document what data is collected and why. Privacy violations are easier to prevent than remediate.</p><p>Implement log scrubbing at the structured logging layer: redact fields matching patterns for emails, phone numbers, credit cards, and API keys before they reach the log aggregator. Set retention policies (30 days for detailed logs, 90 days for aggregated metrics, 13 months for compliance-required audit logs) and automate deletion. Document your data collection in a privacy manifest that answers: what data, why, how long, who has access.</p><p>See the <a href=https://sambyte.net/systology/principles/privacy-agents/>Privacy & Agents</a> principles for comprehensive guidance on data minimization and consent that applies to all observability data.</p><p><strong>Anti-pattern ‚Äî Logging Request Bodies:</strong> Logging full HTTP request and response bodies for debugging. This captures passwords, tokens, personal data, and sensitive business data in your log aggregator‚Äîwhich may not have the same access controls as your application database. Log metadata (status codes, durations, paths) and mask or omit bodies.</p><h2 id=decision-framework>Decision Framework</h2><p>Choose your monitoring strategy based on the signal-to-noise ratio you need for your operational scale:</p><table><thead><tr><th style=text-align:left>If you need&mldr;</th><th style=text-align:left>&mldr;choose this</th><th style=text-align:left>because&mldr;</th></tr></thead><tbody><tr><td style=text-align:left><strong>High Granularity</strong></td><td style=text-align:left>Structured Logging</td><td style=text-align:left>Enables deep-trace debugging and per-request analysis.</td></tr><tr><td style=text-align:left><strong>High Aggregate Perf</strong></td><td style=text-align:left>Metrics (Counters/Gauges)</td><td style=text-align:left>Lightweight and perfect for real-time dashboards/alerts.</td></tr><tr><td style=text-align:left><strong>User Flow Context</strong></td><td style=text-align:left>Distributed Tracing</td><td style=text-align:left>Visualizes bottlenecks across service boundaries.</td></tr><tr><td style=text-align:left><strong>Alert Accuracy</strong></td><td style=text-align:left>SLI/SLO Targets</td><td style=text-align:left>Focuses on user-impact rather than server-level noise.</td></tr></tbody></table><p><strong>Decision Heuristic:</strong> &ldquo;Choose <strong>Metrics</strong> for detection and <strong>Traces</strong> for investigation. Don&rsquo;t drown in logs before you have a high-level dashboard to guide the search.&rdquo;</p></section><aside class=related><h3>Related</h3><ul><li><a href=/systology/designs/background-job-queue/>Background Job Queue for Big Tasks</a>
<span class=related-type><small class=label-tag>tag</small></span><br><small class=muted>Asynchronous job queue design for resource-heavy tasks (video encoding, data processing) with retries, idempotency, DLQ handling, and autoscaling.</small></li><li><a href=/systology/deep-dives/chowist/>Chowist</a>
<span class=related-type><small class=label-tag>tag</small></span><br><small class=muted>Monolithic Django app for place listings; focus on production hardening: static serving, background jobs, connection pooling, and CI/CD.</small></li><li><a href=/systology/designs/distributed-cache/>Distributed Caching Layer for VCS</a>
<span class=related-type><small class=label-tag>tag</small></span><br><small class=muted>Design a distributed cache to reduce I/O and speed up VCS operations by caching objects and hashes with high concurrency and low latency.</small></li><li><a href=/systology/designs/feature-etl/>ETL Pipeline for ML Features</a>
<span class=related-type><small class=label-tag>tag</small></span><br><small class=muted>Robust ETL pipeline for deterministic, reproducible ML feature generation from diverse sources, with idempotence and scale in mind.</small></li></ul></aside></article></main><footer class=site-footer role=contentinfo><div class="container footer-inner"><p class=copyright>&copy; 2026 Systology. All rights reserved.</p><div class=social-links><a href=https://github.com/huangsam target=_blank rel="noopener noreferrer" aria-label=GitHub><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=http://linkedin.com/in/sambyte target=_blank rel="noopener noreferrer" aria-label=LinkedIn><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div></div></footer><div id=site-search-modal class=site-search-modal-container style=display:none><div class=site-search-overlay data-close-search></div><div class=site-search-modal><div class=site-search-header><div class=site-search-input-wrapper><span class=site-search-icon><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
</span><input type=text class=site-search-input id=site-search-input placeholder="Search designs, principles, deep dives..." aria-label=Search autocomplete=off>
<button class=site-search-close data-close-search>&#215;</button></div></div><div class=site-search-body><div id=site-search-default class=site-search-default><div class=site-search-quick-links><a href=/categories/ class=site-search-cta><span class=site-search-cta-icon>üìÇ</span>
<span class=site-search-cta-text>All Categories</span>
<span class=site-search-cta-arrow>‚Üí</span>
</a><a href=/tags/ class=site-search-cta><span class=site-search-cta-icon>üè∑Ô∏è</span>
<span class=site-search-cta-text>All Tags</span>
<span class=site-search-cta-arrow>‚Üí</span></a></div></div><div id=site-search-results-list style=display:none></div></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){let i=null,o=null;const t=document.getElementById("site-search-modal"),n=document.getElementById("site-search-input"),s=document.getElementById("site-search-default"),e=document.getElementById("site-search-results-list"),d=document.querySelectorAll("[data-close-search]"),h=document.querySelectorAll("[data-open-search]");if(!t)return;document.body.appendChild(t);let l=!1;function u(){if(l)return;fetch("/search-index.json").then(e=>e.json()).then(e=>{i=e.documents,l=!0}).catch(e=>console.error("Failed to load search index:",e))}function r(){u(),t.style.display="flex",document.body.style.overflow="hidden",setTimeout(()=>{n.focus(),n.value.trim()?c(n.value):(s.style.display="block",e.style.display="none")},50)}function a(){t.style.display="none",document.body.style.overflow="",n.value="",e.innerHTML="",s.style.display="block",e.style.display="none"}h.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),r()})}),d.forEach(e=>{e.addEventListener("click",a)});function c(t){if(!i)return;if(!t.trim()){s.style.display="block",e.style.display="none",e.innerHTML="";return}s.style.display="none",e.style.display="block",t=t.toLowerCase();const n=i.filter(e=>{const n=e.content.toLowerCase(),s=e.title.toLowerCase(),o=(e.tags||[]).join(" ").toLowerCase();return n.includes(t)||s.includes(t)}).slice(0,15);n.length===0?e.innerHTML='<p class="site-search-no-results">No results found.</p>':e.innerHTML=n.map(e=>`
        <a href="${e.url}" class="site-search-result">
          <div class="site-search-result-title">${e.title}</div>
          <div class="site-search-result-preview">${e.preview}</div>
          <div class="site-search-result-meta">
            <span class="site-search-badge-category">${e.category}</span>
            ${e.tags.map(e=>`<span class="site-search-badge">${e}</span>`).join("")}
          </div>
        </a>
      `).join("")}n.addEventListener("input",function(e){o&&clearTimeout(o),o=setTimeout(()=>{c(e.target.value)},300)}),document.addEventListener("keydown",function(e){(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),t.style.display==="none"||t.style.display===""?r():a()),e.key==="Escape"&&t.style.display==="flex"&&a()})})</script><script>document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".pseudocode-toggle"),n=document.querySelectorAll(".pseudocode-modal-close"),s=document.querySelectorAll(".pseudocode-modal-overlay");function o(e){const t=document.getElementById(e);if(!t)return;t.classList.add("active"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const n=t.querySelector(".pseudocode-modal-close");n&&n.focus()}function e(e){if(!e)return;e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="";const t=document.querySelector(`.pseudocode-toggle[aria-controls="${e.id}"]`);t&&t.focus()}t.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-controls");o(t)})}),n.forEach(t=>{t.addEventListener("click",t=>{const n=t.target.closest(".pseudocode-modal");e(n)})}),s.forEach(t=>{t.addEventListener("click",t=>{const n=t.target.closest(".pseudocode-modal");e(n)})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){const t=document.querySelector(".pseudocode-modal.active");t&&e(t)}})})</script><script src=/js/mermaid.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){window.mermaid&&mermaid.initialize({startOnLoad:!0,theme:"base",securityLevel:"loose",themeVariables:{primaryColor:"#f3f4f6",primaryTextColor:"#0f1724",primaryBorderColor:"#2563eb",lineColor:"#6b7280",secondBkgColor:"#ffffff",tertiaryTextColor:"#6b7280",tertiaryColor:"#e6e9ee",noteBkgColor:"#f0f9ff",noteBorderColor:"#2563eb",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},flowchart:{useMaxWidth:!0,curve:"linear"},sequence:{useMaxWidth:!0},gantt:{useWidth:0[0]}});var e=document.getElementById("theme-toggle");e&&e.addEventListener("click",function(){var e=document.documentElement.getAttribute("data-theme")==="dark";document.documentElement.setAttribute("data-theme",e?"":"dark");try{localStorage.setItem("theme",e?"light":"dark")}catch{}})})</script></body></html>