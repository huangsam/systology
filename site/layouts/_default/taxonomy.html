{{ define "main" }}
  <article>
    <header>
      <h1>{{ .Title }}</h1>
      {{ with .Params.description }}
        <p class="lead">{{ . }}</p>
      {{ end }}
      <p class="meta">{{ len .Pages }} item{{ if gt (len .Pages) 1 }}s{{ end }}</p>
    </header>

    {{ if .Content }}
      <section class="tax-content">{{ .Content }}</section>
    {{ end }}

    {{ $pages := .Pages.ByDate.Reverse }}
    {{ $paginator := .Paginate $pages 20 }}

    <ul class="listing">
      {{ range $paginator.Pages }}
        <li>
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          {{ with .Params.tags }}
            <small class="tags">&nbsp;—&nbsp;{{ range $i, $t := . }}{{ if $i }}, {{ end }}<a href="/tags/{{ $t | urlize }}/">{{ $t }}</a>{{ end }}</small>
          {{ end }}
          {{ with .Params.summary }}
            <p>{{ . }}</p>
          {{ end }}
        </li>
      {{ end }}
    </ul>

    <nav class="pagination">
      {{ if $paginator.HasPrev }}<a class="prev" href="{{ $paginator.Prev.URL }}">← Previous</a>{{ end }}
      {{ if $paginator.HasNext }}<a class="next" href="{{ $paginator.Next.URL }}">Next →</a>{{ end }}
    </nav>
  </article>
{{ end }}
