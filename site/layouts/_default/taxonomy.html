{{ define "main" }}
<article>
  <header>
    <h1>{{ .Title }}</h1>
    <p class="meta">{{ len .Pages }} item{{ if gt (len .Pages) 1 }}s{{ end }}</p>
  </header>

  {{ $pages := .Pages.ByDate.Reverse }}
  {{ $paginator := .Paginate $pages 20 }}

  <ul class="listing">
    {{ range $paginator.Pages.ByTitle }}
    {{ partial "components/list-item.html" (dict
    "title" .Title
    "url" .RelPermalink
    "summary" .Params.summary
    "tags" .Params.tags
    "draft" .Draft
    ) }}
    {{ end }}
  </ul>

  <nav class="pagination">
    {{ if $paginator.HasPrev }}<a class="prev" href="{{ $paginator.Prev.URL }}">← Previous</a>{{ end }}
    {{ if $paginator.HasNext }}<a class="next" href="{{ $paginator.Next.URL }}">Next →</a>{{ end }}
  </nav>
</article>
{{ end }}
