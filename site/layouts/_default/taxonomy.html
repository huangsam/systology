{{ define "main" }}
  <article>
    <header>
      <h1>{{ .Title }}</h1>
      {{ with .Params.description }}
        <p class="lead">{{ . }}</p>
      {{ end }}
      <p class="meta">{{ len .Pages }} item{{ if gt (len .Pages) 1 }}s{{ end }}</p>
    </header>

    {{ if .Content }}
      <section class="tax-content">{{ .Content }}</section>
    {{ end }}

    {{ $pages := .Pages.ByDate.Reverse }}
    {{ $paginator := .Paginate $pages 12 }}

    <section class="posts-grid">
      {{ range $paginator.Pages }}
        <article class="post-card">
          <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
          {{ with .Summary }}
            <p class="summary">{{ . }}</p>
          {{ end }}
          {{ with .Params.tags }}
            <span class="tags-inline">{{ range $t := . }}<a class="badge" href="/tags/{{ $t | urlize }}/">{{ $t }}</a>{{ end }}</span>
          {{ end }}
        </article>
      {{ end }}
    </section>

    <nav class="pagination">
      {{ if $paginator.HasPrev }}<a class="prev" href="{{ $paginator.Prev.URL }}">← Previous</a>{{ end }}
      {{ if $paginator.HasNext }}<a class="next" href="{{ $paginator.Next.URL }}">Next →</a>{{ end }}
    </nav>
  </article>
{{ end }}
